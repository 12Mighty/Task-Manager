# Task-Manager
### Документация для проекта "Task Manager"

#### Описание

Этот проект представляет собой систему для управления задачами и проектами с использованием Flask и SQLite. Он позволяет пользователям с различными ролями (администратор, менеджер, работник) регистрироваться, авторизовываться, а также управлять проектами и задачами. Пользователи могут быть назначены на задачи и иметь различные уровни доступа, что позволяет эффективно распределять ответственность в рамках организации.

---

#### Установка

1. **Клонировать репозиторий**:
   ```bash
   git clone https://github.com/yourusername/task-manager.git
   ```

2. **Создать виртуальное окружение**:
   ```bash
   python3 -m venv venv
   source venv/bin/activate  # Для Linux/macOS
   venv\Scripts\activate     # Для Windows
   ```

3. **Установить зависимости**:
   ```bash
   pip install -r requirements.txt
   ```

4. **Инициализировать базу данных**:
   Чтобы создать структуру базы данных и добавить администратора по умолчанию, выполните команду:
   ```bash
   flask init-db
   ```

5. **Запуск приложения**:
   Для запуска сервера используйте команду:
   ```bash
   flask run
   ```

---

#### Структура проекта

- **app.py** - основной файл приложения Flask. Здесь определены маршруты и логика работы с базой данных.
- **schema.sql** - SQL-скрипт для инициализации базы данных.
- **templates/** - папка с HTML-шаблонами для различных страниц (панели администратора, менеджера, работника).
- **instance/** - папка для хранения базы данных SQLite и конфигурационных файлов.

---

#### Основные модели данных

- **Пользователи (`users`)**:
  - `id`: уникальный идентификатор пользователя.
  - `username`: имя пользователя.
  - `password`: хешированный пароль пользователя.
  - `role`: роль пользователя (admin, manager, worker).

- **Проекты (`projects`)**:
  - `id`: уникальный идентификатор проекта.
  - `name`: название проекта.
  - `description`: описание проекта.
  - `created_by`: идентификатор пользователя, создавшего проект.

- **Задачи (`tasks`)**:
  - `id`: уникальный идентификатор задачи.
  - `title`: название задачи.
  - `description`: описание задачи.
  - `project_id`: идентификатор проекта, к которому относится задача.
  - `assigned_to`: идентификатор пользователя, назначенного на задачу.
  - `assigned_by`: идентификатор пользователя, назначившего задачу.
  - `status`: статус задачи (pending, completed).

- **Логи действий (`logs`)**:
  - `id`: уникальный идентификатор лога.
  - `user_id`: идентификатор пользователя, совершившего действие.
  - `action`: действие (например, login, task_completed).
  - `details`: дополнительные детали действия.

---

#### Роли пользователей

1. **Администратор**:
   - Может управлять пользователями (создавать, изменять роли, удалять).
   - Может создавать и удалять проекты.
   - Может просматривать все логи действий.

2. **Менеджер**:
   - Может создавать и управлять проектами, к которым он привязан.
   - Может назначать задачи работникам.

3. **Работник**:
   - Может видеть свои задачи.
   - Может завершать задачи, назначенные ему.

---

#### Основные маршруты

- **/login**: Страница для входа в систему.
- **/register**: Страница для регистрации нового пользователя.
- **/logout**: Выход из системы.
- **/admin/get_users**: Получить список всех пользователей (доступно только администраторам).
- **/manager/get_projects**: Получить список проектов, созданных текущим менеджером.
- **/manager/create_project**: Создать новый проект.
- **/manager/create_task**: Создать новую задачу и назначить ее пользователю.

---

#### Инициализация базы данных

При первом запуске приложения необходимо инициализировать базу данных с помощью команды:
```bash
flask init-db
```
Эта команда создаст все необходимые таблицы в базе данных и добавит администратора с логином `admin` и паролем `admin123`.

---

#### Логирование действий

Все действия пользователей (например, вход, выход, изменение ролей, завершение задач) записываются в базу данных в таблицу `logs`. Это помогает отслеживать, кто и когда выполнял определенные операции.

---

#### Пример команд для администрирования

1. **Создание проекта**:
   ```python
   create_project("New Project", "Description of the project", user_id)
   ```

2. **Регистрация нового пользователя**:
   ```python
   register_user("newuser", "password", "worker")
   ```

3. **Авторизация пользователя**:
   ```python
   login_user("newuser", "password")
   ```

4. **Завершение задачи**:
   ```python
   complete_task(task_id)
   ```

---

#### Контрибуция

Если вы хотите внести свой вклад в проект, пожалуйста, создайте форк репозитория и отправьте пулл-реквест с вашим предложением.

1. Форкните репозиторий.
2. Создайте новую ветку.
3. Внесите изменения.
4. Отправьте пулл-реквест.

---

Если нужно добавить или изменить что-то в документации, сообщите об этом!
